请帮我在项目里实现一个后端接口，供扣子AI调用，用于按“查询日期”拉取该晚睡眠数据并返回汇总指标。

1) 数据源

表：health_data

字段：

heart_rate（次/半分钟）

breathing_rate（次/半分钟）

sleep_status（睡眠状态）

motion_index（体动 0-100）

upload_time（datetime，有索引 idx_upload_time）

2) 接口要求（必须带查询日期）

实现接口（按项目风格选一种即可）：

GET /api/sleep/summary?date=YYYY-MM-DD

接口根据 date 查询并统计该日期对应的一晚睡眠的汇总信息后返回 JSON。

说明：睡眠通常跨夜，建议查询窗口为 [date 18:00:00, date+1 12:00:00]（若项目里已有“睡眠窗口”定义则优先沿用），请在代码里明确窗口计算逻辑。

（可选扩展：也允许 start/end 覆盖默认窗口，但 date 必须支持）

3) 返回字段（扣子从 body 直接拿）

必须返回：

query_date：查询日期（YYYY-MM-DD）

start_time、end_time：实际查询窗口起止时间

sample_count：窗口内记录数

rem_duration_min：REM 时长（分钟）

nrem_duration_min：NREM 时长（分钟）

total_sleep_min：总睡眠时长（分钟）= REM + NREM

avg_heart_rate：平均心率（窗口内 heart_rate 平均）

avg_breathing_rate：平均呼吸频率（窗口内 breathing_rate 平均）

wake_count：起床次数（按下方规则）

wake_start_times：清醒段起始时间列表（datetime 数组）

4) 计算规则
4.1 REM/NREM 时长

从 sleep_status 统计 REM / NREM 记录数并换算时长

采样粒度：默认每条记录=30秒（因为心率/呼吸是“次/半分钟”），因此：

时长（分钟）= 记录数 * 0.5
（若项目已有统一采样间隔常量，以现有为准）

4.2 平均心率 / 平均呼吸频率

在同一查询窗口内，对 heart_rate、breathing_rate 求平均即可

单位请在代码注释/接口说明中明确（可保持“次/半分钟”，或换算到“次/分钟”，但需统一且说明）

4.3 清醒段起始时间 wake_start_times

定义一次清醒段开始：sleep_status 从非 Wake（REM 或 NREM）切换为 Wake 的那条记录，其 upload_time 记为该次清醒的起始时间

返回所有清醒段开始时间（升序）

4.4 起床次数 wake_count（重点）

计一次起床需满足：

出现状态转移：REM -> Wake

且在进入 Wake 后，motion_index 先出现一次“较大值”（起床动作），随后出现 motion_index == 0 的记录
（必须要有“变为0”这一步，因为用户起床后无法检测到体动）

满足以上条件计 1 次起床

其中 “motion_index 较大值”：

若项目已有阈值沿用；

没有则新增可配置参数 motion_threshold（给默认值并注释可调）

5) 开发要求

按现有项目结构实现（route/controller/service/dao）

查询必须走 upload_time 范围（利用索引）

参数校验：date 格式、无数据时返回空/0并给出合理提示字段

给示例响应 JSON

若有测试框架，补单测或至少提供本地验证方式

如果需要我补充 sleep_status 在库里的具体枚举字符串（REM/NREM/Wake 实际存的值），你先在项目里搜已有常量/枚举；找不到再告诉我我来补充。